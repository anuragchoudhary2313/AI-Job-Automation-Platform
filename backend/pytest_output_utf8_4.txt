============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-7.4.4, pluggy-1.6.0 -- C:\Users\anura\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\anura\ai-job-automation-saas\backend
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.2.0, asyncio-0.23.4, cov-4.1.0
asyncio: mode=Mode.AUTO
collecting ... collected 68 items / 1 skipped

tests/test_auth.py::TestUserRegistration::test_register_new_user FAILED  [  1%]
tests/test_auth.py::TestUserRegistration::test_register_duplicate_email FAILED [  2%]
tests/test_auth.py::TestUserRegistration::test_register_invalid_email PASSED [  4%]
tests/test_auth.py::TestUserRegistration::test_register_weak_password PASSED [  5%]
tests/test_auth.py::TestUserLogin::test_login_success FAILED             [  7%]
tests/test_auth.py::TestUserLogin::test_login_wrong_password FAILED      [  8%]
tests/test_auth.py::TestUserLogin::test_login_nonexistent_user FAILED    [ 10%]
tests/test_auth.py::TestUserLogin::test_login_missing_credentials FAILED [ 11%]
tests/test_auth.py::TestJWTTokens::test_token_contains_user_info PASSED  [ 13%]
tests/test_auth.py::TestJWTTokens::test_access_protected_endpoint_with_token FAILED [ 14%]
tests/test_auth.py::TestJWTTokens::test_access_protected_endpoint_without_token FAILED [ 16%]
tests/test_auth.py::TestJWTTokens::test_access_with_invalid_token FAILED [ 17%]
tests/test_auth.py::TestJWTTokens::test_token_expiration FAILED          [ 19%]
tests/test_auth.py::TestRoleBasedAccess::test_admin_can_access_admin_endpoint PASSED [ 20%]
tests/test_auth.py::TestRoleBasedAccess::test_member_cannot_access_admin_endpoint FAILED [ 22%]
tests/test_auth.py::TestRoleBasedAccess::test_viewer_has_read_only_access FAILED [ 23%]
tests/test_auth.py::TestPasswordSecurity::test_password_is_hashed PASSED [ 25%]
tests/test_auth.py::TestPasswordSecurity::test_password_verification PASSED [ 26%]
tests/test_auth.py::TestPasswordSecurity::test_same_password_different_hashes PASSED [ 27%]
tests/test_jobs.py::TestJobCreation::test_create_job_authenticated FAILED [ 29%]
tests/test_jobs.py::TestJobCreation::test_create_job_unauthenticated FAILED [ 30%]
tests/test_jobs.py::TestJobCreation::test_create_job_missing_required_fields FAILED [ 32%]
tests/test_jobs.py::TestJobCreation::test_create_job_with_invalid_status FAILED [ 33%]
tests/test_jobs.py::TestJobRetrieval::test_get_all_jobs FAILED           [ 35%]
tests/test_jobs.py::TestJobRetrieval::test_get_job_by_id FAILED          [ 36%]
tests/test_jobs.py::TestJobRetrieval::test_get_nonexistent_job PASSED    [ 38%]
tests/test_jobs.py::TestJobRetrieval::test_filter_jobs_by_status FAILED  [ 39%]
tests/test_jobs.py::TestJobRetrieval::test_search_jobs_by_company FAILED [ 41%]
tests/test_jobs.py::TestJobUpdate::test_update_job FAILED                [ 42%]
tests/test_jobs.py::TestJobUpdate::test_update_job_status_only FAILED    [ 44%]
tests/test_jobs.py::TestJobUpdate::test_update_nonexistent_job PASSED    [ 45%]
tests/test_jobs.py::TestJobDeletion::test_delete_job FAILED              [ 47%]
tests/test_jobs.py::TestJobDeletion::test_delete_nonexistent_job PASSED  [ 48%]
tests/test_jobs.py::TestJobDeletion::test_admin_can_delete_any_job FAILED [ 50%]
tests/test_jobs.py::TestJobPagination::test_paginate_jobs FAILED         [ 51%]
tests/test_jobs.py::TestJobPagination::test_pagination_with_filters FAILED [ 52%]
tests/test_teams.py::TestTeamIsolation::test_user_cannot_see_other_team_jobs FAILED [ 54%]
tests/test_teams.py::TestTeamIsolation::test_user_cannot_access_other_team_job_by_id PASSED [ 55%]
tests/test_teams.py::TestTeamIsolation::test_user_cannot_update_other_team_job PASSED [ 57%]
tests/test_teams.py::TestTeamIsolation::test_user_cannot_delete_other_team_job PASSED [ 58%]
tests/test_teams.py::TestTeamManagement::test_create_team_on_registration FAILED [ 60%]
tests/test_teams.py::TestTeamManagement::test_admin_can_invite_team_members FAILED [ 61%]
tests/test_teams.py::TestTeamManagement::test_member_cannot_invite_team_members FAILED [ 63%]
tests/test_teams.py::TestTeamManagement::test_get_team_members FAILED    [ 64%]
tests/test_teams.py::TestTeamManagement::test_admin_can_remove_team_member FAILED [ 66%]
tests/test_teams.py::TestTeamManagement::test_member_cannot_remove_team_member FAILED [ 67%]
tests/test_teams.py::TestTeamSettings::test_team_has_isolated_settings SKIPPED [ 69%]
tests/test_teams.py::TestTeamSettings::test_update_team_settings SKIPPED [ 70%]
tests/test_teams.py::TestTeamSettings::test_member_cannot_update_team_settings SKIPPED [ 72%]
tests/test_teams.py::TestCrossTeamDataLeaks::test_search_does_not_leak_other_team_data FAILED [ 73%]
tests/test_teams.py::TestCrossTeamDataLeaks::test_statistics_are_team_isolated FAILED [ 75%]
tests/smoke/test_smoke.py::TestAuthenticationFlow::test_01_health_check FAILED [ 76%]
tests/smoke/test_smoke.py::TestAuthenticationFlow::test_02_user_registration FAILED [ 77%]
tests/smoke/test_smoke.py::TestAuthenticationFlow::test_03_user_login FAILED [ 79%]
tests/smoke/test_smoke.py::TestAuthenticationFlow::test_04_get_current_user FAILED [ 80%]
tests/smoke/test_smoke.py::TestAuthenticationFlow::test_05_invalid_login FAILED [ 82%]
tests/smoke/test_smoke.py::TestResumeFlow::test_01_list_resumes_empty FAILED [ 83%]
tests/smoke/test_smoke.py::TestResumeFlow::test_02_upload_resume FAILED  [ 85%]
tests/smoke/test_smoke.py::TestResumeFlow::test_03_list_resumes_with_data FAILED [ 86%]
tests/smoke/test_smoke.py::TestResumeFlow::test_04_download_resume FAILED [ 88%]
tests/smoke/test_smoke.py::TestResumeFlow::test_05_delete_resume FAILED  [ 89%]
tests/smoke/test_smoke.py::TestJobScrapingFlow::test_01_scrape_jobs FAILED [ 91%]
tests/smoke/test_smoke.py::TestJobScrapingFlow::test_02_list_scraped_jobs FAILED [ 92%]
tests/smoke/test_smoke.py::TestSchedulerFlow::test_01_scheduler_status FAILED [ 94%]
tests/smoke/test_smoke.py::TestSchedulerFlow::test_02_list_jobs FAILED   [ 95%]
tests/smoke/test_smoke.py::TestStatsFlow::test_01_dashboard_stats FAILED [ 97%]
tests/smoke/test_smoke.py::TestWebSocketFlow::test_01_websocket_endpoint_exists FAILED [ 98%]
tests/smoke/test_smoke.py::test_summary PASSED                           [100%]

================================== FAILURES ===================================
_________________ TestUserRegistration.test_register_new_user _________________
tests\test_auth.py:24: in test_register_new_user
    assert response.status_code == status.HTTP_200_OK
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:45,664 - app.main - INFO - Starting application...
2026-02-12 00:38:45,697 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:45,698 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:45,700 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:45,700 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:45,711 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:45,712 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:45,713 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:45,715 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:45,715 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:45,716 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:45,716 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:45,728 - app.core.middleware - INFO - Wait Request: POST /api/v1/auth/register from unknown
2026-02-12 00:38:45,747 - app.api.endpoints.auth - ERROR - Registration error: 'UserCreate' object has no attribute 'team_id'
Traceback (most recent call last):
  File "C:\Users\anura\ai-job-automation-saas\backend\app\api\endpoints\auth.py", line 111, in register
    user = await auth_service.register_user(user_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\services\auth_service.py", line 93, in register_user
    team_id=user_data.team_id
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 1026, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'UserCreate' object has no attribute 'team_id'
2026-02-12 00:38:45,755 - app.core.error_handlers - ERROR - HTTP 500: An error occurred during registration
2026-02-12 00:38:45,763 - app.core.middleware - INFO - Completed: 500 in 35.97ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/auth/register from unknown
ERROR    app.api.endpoints.auth:auth.py:120 Registration error: 'UserCreate' object has no attribute 'team_id'
Traceback (most recent call last):
  File "C:\Users\anura\ai-job-automation-saas\backend\app\api\endpoints\auth.py", line 111, in register
    user = await auth_service.register_user(user_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\services\auth_service.py", line 93, in register_user
    team_id=user_data.team_id
            ^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\pydantic\main.py", line 1026, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'UserCreate' object has no attribute 'team_id'
ERROR    app.core.error_handlers:error_handlers.py:114 HTTP 500: An error occurred during registration
INFO     app.core.middleware:middleware.py:32 Completed: 500 in 35.97ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:46,832 - app.main - INFO - Shutting down application...
2026-02-12 00:38:46,834 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:46,834 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:46,835 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_____________ TestUserRegistration.test_register_duplicate_email ______________
tests\test_auth.py:41: in test_register_duplicate_email
    assert response.status_code == status.HTTP_400_BAD_REQUEST
E   assert 422 == 400
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
E    +  and   400 = status.HTTP_400_BAD_REQUEST
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:47,097 - app.main - INFO - Starting application...
2026-02-12 00:38:47,100 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,100 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,103 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,104 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,106 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:47,106 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:47,108 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:47,109 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:47,110 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:47,111 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:47,112 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:47,204 - app.core.middleware - INFO - Wait Request: POST /api/v1/auth/register from unknown
2026-02-12 00:38:47,219 - app.core.error_handlers - WARNING - Validation error: [{'field': 'body.full_name', 'message': 'Field required', 'type': 'missing'}]
2026-02-12 00:38:47,222 - app.core.middleware - INFO - Completed: 422 in 18.22ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/auth/register from unknown
WARNING  app.core.error_handlers:error_handlers.py:92 Validation error: [{'field': 'body.full_name', 'message': 'Field required', 'type': 'missing'}]
INFO     app.core.middleware:middleware.py:32 Completed: 422 in 18.22ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:47,257 - app.main - INFO - Shutting down application...
2026-02-12 00:38:47,259 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:47,259 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:47,260 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
______________________ TestUserLogin.test_login_success _______________________
tests\test_auth.py:83: in test_login_success
    assert response.status_code == status.HTTP_200_OK
E   assert 401 == 200
E    +  where 401 = <Response [401 Unauthorized]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:47,899 - app.main - INFO - Starting application...
2026-02-12 00:38:47,900 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,903 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,905 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,906 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:47,908 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:47,909 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:47,910 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:47,912 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:47,912 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:47,913 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:47,913 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:47,952 - app.core.middleware - INFO - Wait Request: POST /api/v1/auth/login from unknown
2026-02-12 00:38:47,981 - app.services.auth_service - WARNING - Authentication failed: User not found for email testuser
2026-02-12 00:38:47,983 - app.core.error_handlers - WARNING - HTTP 401: {'message': 'Incorrect email or password', 'details': {}}
2026-02-12 00:38:47,987 - app.core.middleware - INFO - Completed: 401 in 34.92ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/auth/login from unknown
WARNING  app.services.auth_service:auth_service.py:53 Authentication failed: User not found for email testuser
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 401: {'message': 'Incorrect email or password', 'details': {}}
INFO     app.core.middleware:middleware.py:32 Completed: 401 in 34.92ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:48,029 - app.main - INFO - Shutting down application...
2026-02-12 00:38:48,031 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:48,032 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:48,033 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
___________________ TestUserLogin.test_login_wrong_password ___________________
tests\test_auth.py:97: in test_login_wrong_password
    assert response.status_code == status.HTTP_400_BAD_REQUEST
E   assert 429 == 400
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
E    +  and   400 = status.HTTP_400_BAD_REQUEST
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:48,190 - app.main - INFO - Starting application...
2026-02-12 00:38:48,192 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,193 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,195 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,196 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,197 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:48,198 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:48,199 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:48,200 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:48,202 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:48,203 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:48,203 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:48,263 - app.main - INFO - Shutting down application...
2026-02-12 00:38:48,265 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:48,266 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:48,267 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
__________________ TestUserLogin.test_login_nonexistent_user __________________
tests\test_auth.py:108: in test_login_nonexistent_user
    assert response.status_code == status.HTTP_400_BAD_REQUEST
E   assert 429 == 400
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
E    +  and   400 = status.HTTP_400_BAD_REQUEST
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:48,453 - app.main - INFO - Starting application...
2026-02-12 00:38:48,454 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,455 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,457 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,458 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,459 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:48,460 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:48,461 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:48,462 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:48,463 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:48,464 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:48,466 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:48,615 - app.main - INFO - Shutting down application...
2026-02-12 00:38:48,616 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:48,617 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:48,618 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
________________ TestUserLogin.test_login_missing_credentials _________________
tests\test_auth.py:113: in test_login_missing_credentials
    assert response.status_code == status.HTTP_422_UNPROCESSABLE_ENTITY
E   assert 429 == 422
E    +  where 429 = <Response [429 Too Many Requests]>.status_code
E    +  and   422 = status.HTTP_422_UNPROCESSABLE_ENTITY
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:48,791 - app.main - INFO - Starting application...
2026-02-12 00:38:48,793 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,794 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,795 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,795 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:48,797 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:48,797 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:48,798 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:48,799 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:48,799 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:48,800 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:48,800 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:48,837 - app.main - INFO - Shutting down application...
2026-02-12 00:38:48,839 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:48,840 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:48,841 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
___________ TestJWTTokens.test_access_protected_endpoint_with_token ___________
tests\test_auth.py:131: in test_access_protected_endpoint_with_token
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:49,633 - app.main - INFO - Starting application...
2026-02-12 00:38:49,635 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,636 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,638 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,638 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,640 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:49,641 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:49,642 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:49,643 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:49,644 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:49,645 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:49,645 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:49,674 - app.core.middleware - INFO - Wait Request: GET /api/v1/users/me from unknown
2026-02-12 00:38:49,677 - app.core.error_handlers - WARNING - HTTP 404: Not Found
2026-02-12 00:38:49,681 - app.core.middleware - INFO - Completed: 404 in 7.61ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/users/me from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 404: Not Found
INFO     app.core.middleware:middleware.py:32 Completed: 404 in 7.61ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:49,710 - app.main - INFO - Shutting down application...
2026-02-12 00:38:49,712 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:49,713 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:49,714 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_________ TestJWTTokens.test_access_protected_endpoint_without_token __________
tests\test_auth.py:136: in test_access_protected_endpoint_without_token
    assert response.status_code == status.HTTP_401_UNAUTHORIZED
E   assert 404 == 401
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   401 = status.HTTP_401_UNAUTHORIZED
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:49,870 - app.main - INFO - Starting application...
2026-02-12 00:38:49,872 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,873 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,874 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,875 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:49,877 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:49,878 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:49,879 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:49,880 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:49,880 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:49,882 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:49,883 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:49,890 - app.core.middleware - INFO - Wait Request: GET /api/v1/users/me from unknown
2026-02-12 00:38:49,893 - app.core.error_handlers - WARNING - HTTP 404: Not Found
2026-02-12 00:38:49,898 - app.core.middleware - INFO - Completed: 404 in 7.45ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/users/me from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 404: Not Found
INFO     app.core.middleware:middleware.py:32 Completed: 404 in 7.45ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:49,936 - app.main - INFO - Shutting down application...
2026-02-12 00:38:49,937 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:49,938 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:49,940 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
________________ TestJWTTokens.test_access_with_invalid_token _________________
tests\test_auth.py:144: in test_access_with_invalid_token
    assert response.status_code == status.HTTP_401_UNAUTHORIZED
E   assert 404 == 401
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   401 = status.HTTP_401_UNAUTHORIZED
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:50,087 - app.main - INFO - Starting application...
2026-02-12 00:38:50,088 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,089 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,091 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,093 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,094 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:50,095 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:50,096 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:50,096 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:50,097 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:50,099 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:50,100 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:50,107 - app.core.middleware - INFO - Wait Request: GET /api/v1/users/me from unknown
2026-02-12 00:38:50,110 - app.core.error_handlers - WARNING - HTTP 404: Not Found
2026-02-12 00:38:50,115 - app.core.middleware - INFO - Completed: 404 in 7.80ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/users/me from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 404: Not Found
INFO     app.core.middleware:middleware.py:32 Completed: 404 in 7.80ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:50,153 - app.main - INFO - Shutting down application...
2026-02-12 00:38:50,154 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:50,155 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:50,156 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_____________________ TestJWTTokens.test_token_expiration _____________________
tests\test_auth.py:161: in test_token_expiration
    assert response.status_code == status.HTTP_401_UNAUTHORIZED
E   assert 404 == 401
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   401 = status.HTTP_401_UNAUTHORIZED
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:50,298 - app.main - INFO - Starting application...
2026-02-12 00:38:50,300 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,302 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,303 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,305 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,306 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:50,307 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:50,308 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:50,309 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:50,310 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:50,311 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:50,312 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:50,321 - app.core.middleware - INFO - Wait Request: GET /api/v1/users/me from unknown
2026-02-12 00:38:50,324 - app.core.error_handlers - WARNING - HTTP 404: Not Found
2026-02-12 00:38:50,328 - app.core.middleware - INFO - Completed: 404 in 7.46ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/users/me from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 404: Not Found
INFO     app.core.middleware:middleware.py:32 Completed: 404 in 7.46ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:50,364 - app.main - INFO - Shutting down application...
2026-02-12 00:38:50,366 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:50,366 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:50,368 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
________ TestRoleBasedAccess.test_member_cannot_access_admin_endpoint _________
tests\test_auth.py:175: in test_member_cannot_access_admin_endpoint
    assert response.status_code == status.HTTP_403_FORBIDDEN
E   assert 404 == 403
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   403 = status.HTTP_403_FORBIDDEN
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:50,740 - app.main - INFO - Starting application...
2026-02-12 00:38:50,743 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,744 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,745 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,746 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,747 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:50,748 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:50,750 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:50,751 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:50,752 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:50,752 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:50,754 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:50,783 - app.core.middleware - INFO - Wait Request: GET /api/v1/admin/users from unknown
2026-02-12 00:38:50,787 - app.core.error_handlers - WARNING - HTTP 404: Not Found
2026-02-12 00:38:50,793 - app.core.middleware - INFO - Completed: 404 in 10.69ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/admin/users from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 404: Not Found
INFO     app.core.middleware:middleware.py:32 Completed: 404 in 10.69ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:50,831 - app.main - INFO - Shutting down application...
2026-02-12 00:38:50,832 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:50,833 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:50,835 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
____________ TestRoleBasedAccess.test_viewer_has_read_only_access _____________
tests\test_auth.py:193: in test_viewer_has_read_only_access
    viewer_token = create_access_token(data={"sub": viewer.email})
E   TypeError: create_access_token() got an unexpected keyword argument 'data'
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:50,994 - app.main - INFO - Starting application...
2026-02-12 00:38:50,996 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,997 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,998 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,999 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:50,999 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:51,000 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:51,000 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:51,002 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:51,002 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:51,004 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:51,005 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:51,032 - app.main - INFO - Shutting down application...
2026-02-12 00:38:51,034 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:51,036 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:51,038 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
________________ TestJobCreation.test_create_job_authenticated ________________
tests\test_jobs.py:27: in test_create_job_authenticated
    assert response.status_code == status.HTTP_200_OK
E   assert 405 == 200
E    +  where 405 = <Response [405 Method Not Allowed]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:51,683 - app.main - INFO - Starting application...
2026-02-12 00:38:51,684 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,684 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,687 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,688 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,689 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:51,689 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:51,690 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:51,692 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:51,693 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:51,693 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:51,694 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:51,722 - app.core.middleware - INFO - Wait Request: POST /api/v1/jobs from unknown
2026-02-12 00:38:51,729 - app.core.middleware - INFO - Completed: 307 in 6.55ms
2026-02-12 00:38:51,738 - app.core.middleware - INFO - Wait Request: POST /api/v1/jobs/ from unknown
2026-02-12 00:38:51,743 - app.core.error_handlers - WARNING - HTTP 405: Method Not Allowed
2026-02-12 00:38:51,747 - app.core.middleware - INFO - Completed: 405 in 8.09ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/jobs from unknown
INFO     app.core.middleware:middleware.py:32 Completed: 307 in 6.55ms
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/jobs/ from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 405: Method Not Allowed
INFO     app.core.middleware:middleware.py:32 Completed: 405 in 8.09ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:51,799 - app.main - INFO - Shutting down application...
2026-02-12 00:38:51,800 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:51,802 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:51,804 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_______________ TestJobCreation.test_create_job_unauthenticated _______________
tests\test_jobs.py:40: in test_create_job_unauthenticated
    assert response.status_code == status.HTTP_401_UNAUTHORIZED
E   assert 405 == 401
E    +  where 405 = <Response [405 Method Not Allowed]>.status_code
E    +  and   401 = status.HTTP_401_UNAUTHORIZED
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:51,959 - app.main - INFO - Starting application...
2026-02-12 00:38:51,960 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,960 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,962 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,963 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:51,963 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:51,965 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:51,965 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:51,966 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:51,967 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:51,968 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:51,968 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:51,975 - app.core.middleware - INFO - Wait Request: POST /api/v1/jobs from unknown
2026-02-12 00:38:51,979 - app.core.middleware - INFO - Completed: 307 in 4.24ms
2026-02-12 00:38:51,991 - app.core.middleware - INFO - Wait Request: POST /api/v1/jobs/ from unknown
2026-02-12 00:38:51,993 - app.core.error_handlers - WARNING - HTTP 405: Method Not Allowed
2026-02-12 00:38:51,996 - app.core.middleware - INFO - Completed: 405 in 5.65ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/jobs from unknown
INFO     app.core.middleware:middleware.py:32 Completed: 307 in 4.24ms
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/jobs/ from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 405: Method Not Allowed
INFO     app.core.middleware:middleware.py:32 Completed: 405 in 5.65ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:52,027 - app.main - INFO - Shutting down application...
2026-02-12 00:38:52,029 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:52,029 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:52,031 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
___________ TestJobCreation.test_create_job_missing_required_fields ___________
tests\test_jobs.py:49: in test_create_job_missing_required_fields
    assert response.status_code == status.HTTP_422_UNPROCESSABLE_ENTITY
E   assert 405 == 422
E    +  where 405 = <Response [405 Method Not Allowed]>.status_code
E    +  and   422 = status.HTTP_422_UNPROCESSABLE_ENTITY
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:52,182 - app.main - INFO - Starting application...
2026-02-12 00:38:52,182 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,184 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,186 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,188 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,189 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:52,189 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:52,191 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:52,192 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:52,193 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:52,193 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:52,196 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:52,223 - app.core.middleware - INFO - Wait Request: POST /api/v1/jobs from unknown
2026-02-12 00:38:52,229 - app.core.middleware - INFO - Completed: 307 in 6.60ms
2026-02-12 00:38:52,240 - app.core.middleware - INFO - Wait Request: POST /api/v1/jobs/ from unknown
2026-02-12 00:38:52,243 - app.core.error_handlers - WARNING - HTTP 405: Method Not Allowed
2026-02-12 00:38:52,248 - app.core.middleware - INFO - Completed: 405 in 7.62ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/jobs from unknown
INFO     app.core.middleware:middleware.py:32 Completed: 307 in 6.60ms
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/jobs/ from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 405: Method Not Allowed
INFO     app.core.middleware:middleware.py:32 Completed: 405 in 7.62ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:52,286 - app.main - INFO - Shutting down application...
2026-02-12 00:38:52,287 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:52,287 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:52,287 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_____________ TestJobCreation.test_create_job_with_invalid_status _____________
tests\test_jobs.py:68: in test_create_job_with_invalid_status
    assert response.status_code == status.HTTP_422_UNPROCESSABLE_ENTITY
E   assert 405 == 422
E    +  where 405 = <Response [405 Method Not Allowed]>.status_code
E    +  and   422 = status.HTTP_422_UNPROCESSABLE_ENTITY
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:52,442 - app.main - INFO - Starting application...
2026-02-12 00:38:52,444 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,445 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,446 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,448 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,449 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:52,450 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:52,452 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:52,453 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:52,454 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:52,455 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:52,457 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:38:52,490 - app.core.middleware - INFO - Wait Request: POST /api/v1/jobs/ from unknown
2026-02-12 00:38:52,493 - app.core.error_handlers - WARNING - HTTP 405: Method Not Allowed
2026-02-12 00:38:52,499 - app.core.middleware - INFO - Completed: 405 in 8.47ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/jobs/ from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 405: Method Not Allowed
INFO     app.core.middleware:middleware.py:32 Completed: 405 in 8.47ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:52,558 - app.main - INFO - Shutting down application...
2026-02-12 00:38:52,559 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:52,560 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:52,560 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_____________________ TestJobRetrieval.test_get_all_jobs ______________________
tests\test_jobs.py:77: in test_get_all_jobs
    jobs = [
tests\test_jobs.py:78: in <listcomp>
    Job(title=f"Job {i}", company=f"Company {i}", description="Test Description", team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:52,713 - app.main - INFO - Starting application...
2026-02-12 00:38:52,715 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,716 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,717 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,719 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:52,719 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:52,721 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:52,722 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:52,724 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:52,725 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:52,726 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:52,727 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:55,170 - app.main - INFO - Shutting down application...
2026-02-12 00:38:55,171 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:55,172 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:55,173 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_____________________ TestJobRetrieval.test_get_job_by_id _____________________
tests\test_jobs.py:95: in test_get_job_by_id
    team_id=test_team.id
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:55,309 - app.main - INFO - Starting application...
2026-02-12 00:38:55,311 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:55,311 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:55,312 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:55,313 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:55,313 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:55,313 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:55,315 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:55,316 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:55,316 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:55,317 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:55,317 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:56,363 - app.main - INFO - Shutting down application...
2026-02-12 00:38:56,365 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:56,365 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:56,366 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_________________ TestJobRetrieval.test_filter_jobs_by_status _________________
tests\test_jobs.py:115: in test_filter_jobs_by_status
    Job(title="Job 1", company="Co 1", description="Test Description", status=JobStatus.APPLIED, team_id=test_team.id),
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:56,717 - app.main - INFO - Starting application...
2026-02-12 00:38:56,718 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:56,719 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:56,720 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:56,720 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:56,721 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:56,722 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:56,723 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:56,724 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:56,725 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:56,725 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:56,725 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:57,940 - app.main - INFO - Shutting down application...
2026-02-12 00:38:57,942 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:57,943 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:57,945 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
________________ TestJobRetrieval.test_search_jobs_by_company _________________
tests\test_jobs.py:134: in test_search_jobs_by_company
    Job(title="Job 1", company="Google", description="Test Description", team_id=test_team.id),
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:38:58,131 - app.main - INFO - Starting application...
2026-02-12 00:38:58,133 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:58,134 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:58,135 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:58,137 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:38:58,138 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:38:58,139 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:38:58,141 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:38:58,143 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:38:58,144 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:38:58,145 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:38:58,146 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:38:59,899 - app.main - INFO - Shutting down application...
2026-02-12 00:38:59,899 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:38:59,900 - app.main - INFO - Application shut down successfully
2026-02-12 00:38:59,900 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
________________________ TestJobUpdate.test_update_job ________________________
tests\test_jobs.py:156: in test_update_job
    job = Job(title="Old Title", company="Company", description="Test Description", team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:00,061 - app.main - INFO - Starting application...
2026-02-12 00:39:00,062 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:00,065 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:00,067 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:00,069 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:00,070 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:00,071 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:00,073 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:00,074 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:00,075 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:00,076 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:00,078 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:01,788 - app.main - INFO - Shutting down application...
2026-02-12 00:39:01,789 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:01,791 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:01,792 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
__________________ TestJobUpdate.test_update_job_status_only __________________
tests\test_jobs.py:177: in test_update_job_status_only
    job = Job(title="Job", company="Company", description="Test Description", status=JobStatus.PENDING, team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:01,942 - app.main - INFO - Starting application...
2026-02-12 00:39:01,943 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:01,944 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:01,946 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:01,947 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:01,949 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:01,951 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:01,952 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:01,954 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:01,954 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:01,955 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:01,956 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:03,623 - app.main - INFO - Shutting down application...
2026-02-12 00:39:03,624 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:03,625 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:03,626 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_______________________ TestJobDeletion.test_delete_job _______________________
tests\test_jobs.py:207: in test_delete_job
    job = Job(title="To Delete", company="Company", description="Test Description", team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:04,007 - app.main - INFO - Starting application...
2026-02-12 00:39:04,008 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:04,009 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:04,011 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:04,012 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:04,015 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:04,016 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:04,018 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:04,019 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:04,020 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:04,021 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:04,022 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:05,865 - app.main - INFO - Shutting down application...
2026-02-12 00:39:05,866 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:05,867 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:05,868 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
________________ TestJobDeletion.test_admin_can_delete_any_job ________________
tests\test_jobs.py:226: in test_admin_can_delete_any_job
    job = Job(title="Job", company="Company", description="Test Description", team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:06,237 - app.main - INFO - Starting application...
2026-02-12 00:39:06,238 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:06,239 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:06,240 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:06,240 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:06,242 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:06,243 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:06,245 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:06,246 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:06,247 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:06,247 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:06,248 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:07,884 - app.main - INFO - Shutting down application...
2026-02-12 00:39:07,885 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:07,886 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:07,887 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
____________________ TestJobPagination.test_paginate_jobs _____________________
tests\test_jobs.py:241: in test_paginate_jobs
    jobs = [
tests\test_jobs.py:242: in <listcomp>
    Job(title=f"Job {i}", company=f"Company {i}", description="Test Description", team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:08,032 - app.main - INFO - Starting application...
2026-02-12 00:39:08,034 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:08,035 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:08,036 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:08,038 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:08,039 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:08,039 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:08,040 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:08,042 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:08,043 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:08,044 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:08,045 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:09,774 - app.main - INFO - Shutting down application...
2026-02-12 00:39:09,776 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:09,777 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:09,777 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_______________ TestJobPagination.test_pagination_with_filters ________________
tests\test_jobs.py:270: in test_pagination_with_filters
    jobs = [
tests\test_jobs.py:271: in <listcomp>
    Job(title=f"Job {i}", company="Google", description="Test Description", status=JobStatus.APPLIED, team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:09,915 - app.main - INFO - Starting application...
2026-02-12 00:39:09,917 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:09,919 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:09,920 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:09,921 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:09,923 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:09,924 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:09,925 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:09,927 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:09,927 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:09,929 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:09,929 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:11,465 - app.main - INFO - Shutting down application...
2026-02-12 00:39:11,466 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:11,467 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:11,468 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
___________ TestTeamIsolation.test_user_cannot_see_other_team_jobs ____________
tests\test_teams.py:52: in test_user_cannot_see_other_team_jobs
    assert response.status_code == status.HTTP_200_OK
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:11,568 - app.main - INFO - Starting application...
2026-02-12 00:39:11,570 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:11,571 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:11,572 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:11,573 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:11,574 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:11,575 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:11,575 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:11,576 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:11,577 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:11,577 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:11,578 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:39:11,591 - app.core.middleware - INFO - Wait Request: GET /api/v1/jobs from unknown
2026-02-12 00:39:11,597 - app.core.middleware - INFO - Completed: 307 in 6.16ms
2026-02-12 00:39:11,607 - app.core.middleware - INFO - Wait Request: GET /api/v1/jobs/ from unknown
2026-02-12 00:39:11,613 - app.errors - ERROR - Error: 'AsyncSession' object has no attribute 'query'
Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 97, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 92, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 112, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\ai-job-automation-saas\backend\app\core\error_handlers.py", line 36, in error_handling_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\main.py", line 73, in add_security_headers
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\concurrency.py", line 40, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 2134, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 851, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\api\endpoints\jobs.py", line 63, in list_jobs
    return job_scraper_service.get_jobs(db, skip, limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\services\job_scraper.py", line 66, in get_jobs
    return db.query(ScrapedJob).order_by(ScrapedJob.created_at.desc()).offset(skip).limit(limit).all()
           ^^^^^^^^
AttributeError: 'AsyncSession' object has no attribute 'query'
2026-02-12 00:39:11,933 - app.core.middleware - INFO - Completed: 500 in 325.90ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/jobs from unknown
INFO     app.core.middleware:middleware.py:32 Completed: 307 in 6.16ms
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/jobs/ from unknown
ERROR    app.errors:logging.py:206 Error: 'AsyncSession' object has no attribute 'query'
Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 97, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 92, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 112, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\ai-job-automation-saas\backend\app\core\error_handlers.py", line 36, in error_handling_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\main.py", line 73, in add_security_headers
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\concurrency.py", line 40, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 2134, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 851, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\api\endpoints\jobs.py", line 63, in list_jobs
    return job_scraper_service.get_jobs(db, skip, limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\services\job_scraper.py", line 66, in get_jobs
    return db.query(ScrapedJob).order_by(ScrapedJob.created_at.desc()).offset(skip).limit(limit).all()
           ^^^^^^^^
AttributeError: 'AsyncSession' object has no attribute 'query'
INFO     app.core.middleware:middleware.py:32 Completed: 500 in 325.90ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:11,987 - app.main - INFO - Shutting down application...
2026-02-12 00:39:11,988 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:11,989 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:11,990 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_____________ TestTeamManagement.test_create_team_on_registration _____________
tests\test_teams.py:158: in test_create_team_on_registration
    assert response.status_code == status.HTTP_200_OK
E   assert 422 == 200
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:12,715 - app.main - INFO - Starting application...
2026-02-12 00:39:12,716 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,717 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,719 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,720 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,721 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:12,722 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:12,723 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:12,724 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:12,725 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:12,726 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:12,727 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:39:12,734 - app.core.middleware - INFO - Wait Request: POST /api/v1/auth/register from unknown
2026-02-12 00:39:12,743 - app.core.error_handlers - WARNING - Validation error: [{'field': 'body.full_name', 'message': 'Field required', 'type': 'missing'}]
2026-02-12 00:39:12,749 - app.core.middleware - INFO - Completed: 422 in 13.84ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/auth/register from unknown
WARNING  app.core.error_handlers:error_handlers.py:92 Validation error: [{'field': 'body.full_name', 'message': 'Field required', 'type': 'missing'}]
INFO     app.core.middleware:middleware.py:32 Completed: 422 in 13.84ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:12,782 - app.main - INFO - Shutting down application...
2026-02-12 00:39:12,783 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:12,784 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:12,784 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
____________ TestTeamManagement.test_admin_can_invite_team_members ____________
tests\test_teams.py:173: in test_admin_can_invite_team_members
    assert response.status_code in [status.HTTP_200_OK, status.HTTP_201_CREATED]
E   assert 404 in [200, 201]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:12,932 - app.main - INFO - Starting application...
2026-02-12 00:39:12,934 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,935 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,938 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,939 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:12,940 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:12,942 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:12,943 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:12,944 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:12,945 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:12,946 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:12,947 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:39:12,978 - app.core.middleware - INFO - Wait Request: POST /api/v1/teams/invite from unknown
2026-02-12 00:39:12,982 - app.core.error_handlers - WARNING - HTTP 404: Not Found
2026-02-12 00:39:12,987 - app.core.middleware - INFO - Completed: 404 in 8.10ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/teams/invite from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 404: Not Found
INFO     app.core.middleware:middleware.py:32 Completed: 404 in 8.10ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:13,032 - app.main - INFO - Shutting down application...
2026-02-12 00:39:13,032 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:13,034 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:13,034 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
__________ TestTeamManagement.test_member_cannot_invite_team_members __________
tests\test_teams.py:185: in test_member_cannot_invite_team_members
    assert response.status_code == status.HTTP_403_FORBIDDEN
E   assert 404 == 403
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   403 = status.HTTP_403_FORBIDDEN
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:13,190 - app.main - INFO - Starting application...
2026-02-12 00:39:13,190 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,192 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,193 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,194 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,195 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:13,195 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:13,198 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:13,198 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:13,200 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:13,200 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:13,201 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:39:13,229 - app.core.middleware - INFO - Wait Request: POST /api/v1/teams/invite from unknown
2026-02-12 00:39:13,232 - app.core.error_handlers - WARNING - HTTP 404: Not Found
2026-02-12 00:39:13,237 - app.core.middleware - INFO - Completed: 404 in 7.76ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: POST /api/v1/teams/invite from unknown
WARNING  app.core.error_handlers:error_handlers.py:114 HTTP 404: Not Found
INFO     app.core.middleware:middleware.py:32 Completed: 404 in 7.76ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:13,268 - app.main - INFO - Shutting down application...
2026-02-12 00:39:13,269 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:13,269 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:13,271 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
__________________ TestTeamManagement.test_get_team_members ___________________
tests\test_teams.py:190: in test_get_team_members
    users = [
tests\test_teams.py:195: in <listcomp>
    team_id=test_team.id
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:13,444 - app.main - INFO - Starting application...
2026-02-12 00:39:13,445 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,446 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,447 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,448 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:13,449 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:13,450 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:13,451 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:13,452 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:13,452 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:13,453 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:13,455 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:15,361 - app.main - INFO - Shutting down application...
2026-02-12 00:39:15,361 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:15,362 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:15,363 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
____________ TestTeamManagement.test_admin_can_remove_team_member _____________
tests\test_teams.py:214: in test_admin_can_remove_team_member
    team_id=test_team.id
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:15,513 - app.main - INFO - Starting application...
2026-02-12 00:39:15,515 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:15,518 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:15,520 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:15,522 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:15,524 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:15,525 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:15,527 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:15,529 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:15,531 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:15,532 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:15,534 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:17,632 - app.main - INFO - Shutting down application...
2026-02-12 00:39:17,634 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:17,635 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:17,637 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
__________ TestTeamManagement.test_member_cannot_remove_team_member ___________
tests\test_teams.py:232: in test_member_cannot_remove_team_member
    team_id=test_team.id
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:17,814 - app.main - INFO - Starting application...
2026-02-12 00:39:17,817 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:17,819 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:17,821 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:17,824 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:17,826 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:17,828 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:17,830 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:17,832 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:17,834 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:17,837 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:17,838 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:19,839 - app.main - INFO - Shutting down application...
2026-02-12 00:39:19,840 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:19,842 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:19,843 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
______ TestCrossTeamDataLeaks.test_search_does_not_leak_other_team_data _______
tests\test_teams.py:323: in test_search_does_not_leak_other_team_data
    assert all(job["team_id"] == team1.id for job in jobs)
tests\test_teams.py:323: in <genexpr>
    assert all(job["team_id"] == team1.id for job in jobs)
E   TypeError: string indices must be integers, not 'str'
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:20,038 - app.main - INFO - Starting application...
2026-02-12 00:39:20,039 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,041 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,042 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,044 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,045 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:20,046 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:20,047 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:20,049 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:20,050 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:20,051 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:20,052 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
---------------------------- Captured stdout call -----------------------------
2026-02-12 00:39:20,062 - app.core.middleware - INFO - Wait Request: GET /api/v1/jobs from unknown
2026-02-12 00:39:20,069 - app.core.middleware - INFO - Completed: 307 in 6.63ms
2026-02-12 00:39:20,081 - app.core.middleware - INFO - Wait Request: GET /api/v1/jobs/ from unknown
2026-02-12 00:39:20,087 - app.errors - ERROR - Error: 'AsyncSession' object has no attribute 'query'
Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 97, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 92, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 112, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\ai-job-automation-saas\backend\app\core\error_handlers.py", line 36, in error_handling_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\main.py", line 73, in add_security_headers
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\concurrency.py", line 40, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 2134, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 851, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\api\endpoints\jobs.py", line 63, in list_jobs
    return job_scraper_service.get_jobs(db, skip, limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\services\job_scraper.py", line 66, in get_jobs
    return db.query(ScrapedJob).order_by(ScrapedJob.created_at.desc()).offset(skip).limit(limit).all()
           ^^^^^^^^
AttributeError: 'AsyncSession' object has no attribute 'query'
2026-02-12 00:39:20,104 - app.core.middleware - INFO - Completed: 500 in 23.60ms
------------------------------ Captured log call ------------------------------
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/jobs from unknown
INFO     app.core.middleware:middleware.py:32 Completed: 307 in 6.63ms
INFO     app.core.middleware:middleware.py:21 Wait Request: GET /api/v1/jobs/ from unknown
ERROR    app.errors:logging.py:206 Error: 'AsyncSession' object has no attribute 'query'
Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 97, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 92, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 159, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\streams\memory.py", line 112, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\anura\ai-job-automation-saas\backend\app\core\error_handlers.py", line 36, in error_handling_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\main.py", line 73, in add_security_headers
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\fastapi\routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\starlette\concurrency.py", line 40, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 2134, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\anyio\_backends\_asyncio.py", line 851, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\api\endpoints\jobs.py", line 63, in list_jobs
    return job_scraper_service.get_jobs(db, skip, limit)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\anura\ai-job-automation-saas\backend\app\services\job_scraper.py", line 66, in get_jobs
    return db.query(ScrapedJob).order_by(ScrapedJob.created_at.desc()).offset(skip).limit(limit).all()
           ^^^^^^^^
AttributeError: 'AsyncSession' object has no attribute 'query'
INFO     app.core.middleware:middleware.py:32 Completed: 500 in 23.60ms
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:20,164 - app.main - INFO - Shutting down application...
2026-02-12 00:39:20,165 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:20,166 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:20,167 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
__________ TestCrossTeamDataLeaks.test_statistics_are_team_isolated ___________
tests\test_teams.py:328: in test_statistics_are_team_isolated
    jobs = [
tests\test_teams.py:329: in <listcomp>
    Job(title=f"Job {i}", company="Company", description="Test Description", team_id=test_team.id)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:566: in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1086: in get
    value = self._fire_loader_callables(state, key, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\attributes.py:1116: in _fire_loader_callables
    return state._load_expired(state, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\state.py:798: in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:1651: in load_scalar_attributes
    result = load_on_ident(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:507: in load_on_ident
    return load_on_pk_identity(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\loading.py:692: in load_on_pk_identity
    session.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2308: in execute
    return self._execute_internal(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\session.py:2190: in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\orm\context.py:293: in orm_execute_statement
    result = conn.execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1416: in execute
    return meth(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\sql\elements.py:517: in _execute_on_connection
    return connection._execute_clauseelement(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1639: in _execute_clauseelement
    ret = self._execute_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1848: in _execute_context
    return self._exec_single_context(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1988: in _exec_single_context
    self._handle_dbapi_exception(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:2347: in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\base.py:1969: in _exec_single_context
    self.dialect.do_execute(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\engine\default.py:922: in do_execute
    cursor.execute(statement, parameters)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:146: in execute
    self._adapt_connection._handle_exception(error)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:298: in _handle_exception
    raise error
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py:123: in execute
    _cursor = self.await_(self._connection.cursor())
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py:121: in await_only
    raise exc.MissingGreenlet(
E   sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup ----------------------------
2026-02-12 00:39:20,343 - app.main - INFO - Starting application...
2026-02-12 00:39:20,345 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,345 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,347 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,349 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2026-02-12 00:39:20,350 - apscheduler.scheduler - INFO - Added job "Scrape Jobs (Every 6 hours)" to job store "default"
2026-02-12 00:39:20,352 - apscheduler.scheduler - INFO - Added job "Job Automation (Every 1 hour)" to job store "default"
2026-02-12 00:39:20,353 - apscheduler.scheduler - INFO - Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
2026-02-12 00:39:20,355 - apscheduler.scheduler - INFO - Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
2026-02-12 00:39:20,356 - apscheduler.scheduler - INFO - Scheduler started
2026-02-12 00:39:20,356 - app.scheduler.scheduler - INFO - Scheduler started with timezone Asia/Kolkata
2026-02-12 00:39:20,358 - app.main - INFO - Application started successfully
----------------------------- Captured log setup ------------------------------
INFO     app.main:main.py:33 Starting application...
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:454 Adding job tentatively -- it will be properly scheduled when the scheduler starts
INFO     apscheduler.scheduler:base.py:895 Added job "Scrape Jobs (Every 6 hours)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Job Automation (Every 1 hour)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Check Follow-up Emails (Daily 10 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:895 Added job "Cleanup Logs (Daily 2 AM)" to job store "default"
INFO     apscheduler.scheduler:base.py:181 Scheduler started
INFO     app.scheduler.scheduler:scheduler.py:73 Scheduler started with timezone Asia/Kolkata
INFO     app.main:main.py:42 Application started successfully
-------------------------- Captured stdout teardown ---------------------------
2026-02-12 00:39:22,038 - app.main - INFO - Shutting down application...
2026-02-12 00:39:22,039 - app.scheduler.scheduler - INFO - Scheduler shut down.
2026-02-12 00:39:22,040 - app.main - INFO - Application shut down successfully
2026-02-12 00:39:22,040 - apscheduler.scheduler - INFO - Scheduler has been shut down
---------------------------- Captured log teardown ----------------------------
INFO     app.main:main.py:51 Shutting down application...
INFO     app.scheduler.scheduler:scheduler.py:79 Scheduler shut down.
INFO     app.main:main.py:55 Application shut down successfully
INFO     apscheduler.scheduler:base.py:212 Scheduler has been shut down
_________________ TestAuthenticationFlow.test_01_health_check _________________
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:204: in _new_conn
    sock = connection.create_connection(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:85: in create_connection
    raise err
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:73: in create_connection
    sock.connect(sa)
E   ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:787: in urlopen
    response = self._make_request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:493: in _make_request
    conn.request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:500: in request
    self.endheaders()
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1298: in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1058: in _send_output
    self.send(msg)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:996: in send
    self.connect()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:331: in connect
    self.sock = self._new_conn()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:219: in _new_conn
    raise NewConnectionError(
E   urllib3.exceptions.NewConnectionError: HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:486: in send
    resp = conn.urlopen(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:841: in urlopen
    retries = retries.increment(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\retry.py:519: in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
E   urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /health (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))

During handling of the above exception, another exception occurred:
tests\smoke\test_smoke.py:39: in test_01_health_check
    response = requests.get(f"{BASE_URL}/health")
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:73: in get
    return request("get", url, params=params, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:59: in request
    return session.request(method=method, url=url, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:589: in request
    resp = self.send(prep, **send_kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:703: in send
    r = adapter.send(request, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:519: in send
    raise ConnectionError(e, request=request)
E   requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /health (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))
______________ TestAuthenticationFlow.test_02_user_registration _______________
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:204: in _new_conn
    sock = connection.create_connection(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:85: in create_connection
    raise err
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:73: in create_connection
    sock.connect(sa)
E   ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:787: in urlopen
    response = self._make_request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:493: in _make_request
    conn.request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:500: in request
    self.endheaders()
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1298: in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1058: in _send_output
    self.send(msg)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:996: in send
    self.connect()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:331: in connect
    self.sock = self._new_conn()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:219: in _new_conn
    raise NewConnectionError(
E   urllib3.exceptions.NewConnectionError: HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:486: in send
    resp = conn.urlopen(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:841: in urlopen
    retries = retries.increment(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\retry.py:519: in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
E   urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /api/v1/auth/register (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))

During handling of the above exception, another exception occurred:
tests\smoke\test_smoke.py:47: in test_02_user_registration
    response = requests.post(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:115: in post
    return request("post", url, data=data, json=json, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:59: in request
    return session.request(method=method, url=url, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:589: in request
    resp = self.send(prep, **send_kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:703: in send
    r = adapter.send(request, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:519: in send
    raise ConnectionError(e, request=request)
E   requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /api/v1/auth/register (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))
__________________ TestAuthenticationFlow.test_03_user_login __________________
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:204: in _new_conn
    sock = connection.create_connection(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:85: in create_connection
    raise err
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:73: in create_connection
    sock.connect(sa)
E   ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:787: in urlopen
    response = self._make_request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:493: in _make_request
    conn.request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:500: in request
    self.endheaders()
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1298: in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1058: in _send_output
    self.send(msg)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:996: in send
    self.connect()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:331: in connect
    self.sock = self._new_conn()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:219: in _new_conn
    raise NewConnectionError(
E   urllib3.exceptions.NewConnectionError: HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:486: in send
    resp = conn.urlopen(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:841: in urlopen
    retries = retries.increment(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\retry.py:519: in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
E   urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /api/v1/auth/login (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))

During handling of the above exception, another exception occurred:
tests\smoke\test_smoke.py:61: in test_03_user_login
    response = requests.post(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:115: in post
    return request("post", url, data=data, json=json, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:59: in request
    return session.request(method=method, url=url, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:589: in request
    resp = self.send(prep, **send_kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:703: in send
    r = adapter.send(request, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:519: in send
    raise ConnectionError(e, request=request)
E   requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /api/v1/auth/login (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))
_______________ TestAuthenticationFlow.test_04_get_current_user _______________
tests\smoke\test_smoke.py:77: in test_04_get_current_user
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
________________ TestAuthenticationFlow.test_05_invalid_login _________________
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:204: in _new_conn
    sock = connection.create_connection(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:85: in create_connection
    raise err
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:73: in create_connection
    sock.connect(sa)
E   ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:787: in urlopen
    response = self._make_request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:493: in _make_request
    conn.request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:500: in request
    self.endheaders()
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1298: in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1058: in _send_output
    self.send(msg)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:996: in send
    self.connect()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:331: in connect
    self.sock = self._new_conn()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:219: in _new_conn
    raise NewConnectionError(
E   urllib3.exceptions.NewConnectionError: HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:486: in send
    resp = conn.urlopen(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:841: in urlopen
    retries = retries.increment(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\retry.py:519: in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
E   urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /api/v1/auth/login (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))

During handling of the above exception, another exception occurred:
tests\smoke\test_smoke.py:91: in test_05_invalid_login
    response = requests.post(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:115: in post
    return request("post", url, data=data, json=json, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:59: in request
    return session.request(method=method, url=url, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:589: in request
    resp = self.send(prep, **send_kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:703: in send
    r = adapter.send(request, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:519: in send
    raise ConnectionError(e, request=request)
E   requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /api/v1/auth/login (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))
__________________ TestResumeFlow.test_01_list_resumes_empty __________________
tests\smoke\test_smoke.py:107: in test_01_list_resumes_empty
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
____________________ TestResumeFlow.test_02_upload_resume _____________________
tests\smoke\test_smoke.py:121: in test_02_upload_resume
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
________________ TestResumeFlow.test_03_list_resumes_with_data ________________
tests\smoke\test_smoke.py:145: in test_03_list_resumes_with_data
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
___________________ TestResumeFlow.test_04_download_resume ____________________
tests\smoke\test_smoke.py:159: in test_04_download_resume
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
____________________ TestResumeFlow.test_05_delete_resume _____________________
tests\smoke\test_smoke.py:173: in test_05_delete_resume
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
___________________ TestJobScrapingFlow.test_01_scrape_jobs ___________________
tests\smoke\test_smoke.py:189: in test_01_scrape_jobs
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
________________ TestJobScrapingFlow.test_02_list_scraped_jobs ________________
tests\smoke\test_smoke.py:213: in test_02_list_scraped_jobs
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
_________________ TestSchedulerFlow.test_01_scheduler_status __________________
tests\smoke\test_smoke.py:230: in test_01_scheduler_status
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
_____________________ TestSchedulerFlow.test_02_list_jobs _____________________
tests\smoke\test_smoke.py:244: in test_02_list_jobs
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
____________________ TestStatsFlow.test_01_dashboard_stats ____________________
tests\smoke\test_smoke.py:261: in test_01_dashboard_stats
    assert auth_token is not None, "Must login first"
E   AssertionError: Must login first
E   assert None is not None
_____________ TestWebSocketFlow.test_01_websocket_endpoint_exists _____________
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:204: in _new_conn
    sock = connection.create_connection(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:85: in create_connection
    raise err
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\connection.py:73: in create_connection
    sock.connect(sa)
E   ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:787: in urlopen
    response = self._make_request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:493: in _make_request
    conn.request(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:500: in request
    self.endheaders()
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1298: in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:1058: in _send_output
    self.send(msg)
..\..\AppData\Local\Programs\Python\Python311\Lib\http\client.py:996: in send
    self.connect()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:331: in connect
    self.sock = self._new_conn()
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connection.py:219: in _new_conn
    raise NewConnectionError(
E   urllib3.exceptions.NewConnectionError: HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it

The above exception was the direct cause of the following exception:
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:486: in send
    resp = conn.urlopen(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\connectionpool.py:841: in urlopen
    retries = retries.increment(
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\urllib3\util\retry.py:519: in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
E   urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /docs (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))

During handling of the above exception, another exception occurred:
tests\smoke\test_smoke.py:281: in test_01_websocket_endpoint_exists
    response = requests.get(f"{BASE_URL}/docs")
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:73: in get
    return request("get", url, params=params, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\api.py:59: in request
    return session.request(method=method, url=url, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:589: in request
    resp = self.send(prep, **send_kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\sessions.py:703: in send
    r = adapter.send(request, **kwargs)
..\..\AppData\Local\Programs\Python\Python311\Lib\site-packages\requests\adapters.py:519: in send
    raise ConnectionError(e, request=request)
E   requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /docs (Caused by NewConnectionError("HTTPConnection(host='localhost', port=8000): Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it"))
============================== warnings summary ===============================
app\db\base.py:4
  C:\Users\anura\ai-job-automation-saas\backend\app\db\base.py:4: MovedIn20Warning: The ``as_declarative()`` function is now available as sqlalchemy.orm.as_declarative() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    @as_declarative()

app\schemas\user.py:19
  C:\Users\anura\ai-job-automation-saas\backend\app\schemas\user.py:19: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserInDBBase(UserBase):

app\schemas\log.py:13
  C:\Users\anura\ai-job-automation-saas\backend\app\schemas\log.py:13: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Log(LogBase):

app\schemas\job.py:29
  C:\Users\anura\ai-job-automation-saas\backend\app\schemas\job.py:29: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Job(JobBase):

app\schemas\resume.py:13
  C:\Users\anura\ai-job-automation-saas\backend\app\schemas\resume.py:13: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Resume(ResumeBase):

app\api\endpoints\jobs.py:12
  C:\Users\anura\ai-job-automation-saas\backend\app\api\endpoints\jobs.py:12: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class JobSchema(BaseModel):

tests/test_auth.py::TestUserRegistration::test_register_new_user
  C:\Users\anura\AppData\Local\Programs\Python\Python311\Lib\site-packages\pytest_asyncio\plugin.py:751: DeprecationWarning: The event_loop fixture provided by pytest-asyncio has been redefined in
  C:\Users\anura\ai-job-automation-saas\backend\tests\conftest.py:46
  Replacing the event_loop fixture with a custom implementation is deprecated
  and will lead to errors in the future.
  If you want to request an asyncio event loop with a scope other than function
  scope, use the "scope" argument to the asyncio mark when marking the tests.
  If you want to return different types of event loops, use the event_loop_policy
  fixture.
  
    warnings.warn(

tests/test_auth.py::TestRoleBasedAccess::test_viewer_has_read_only_access
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_auth.py:191: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_see_other_team_jobs
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:20: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_see_other_team_jobs
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:38: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_see_other_team_jobs
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:44: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_access_other_team_job_by_id
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:63: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_access_other_team_job_by_id
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:72: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_access_other_team_job_by_id
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:76: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_access_other_team_job_by_id
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:77: RuntimeWarning: coroutine 'AsyncSession.refresh' was never awaited
    db_session.refresh(other_team_job)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_update_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:91: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_update_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:100: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_update_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:104: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_update_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:105: RuntimeWarning: coroutine 'AsyncSession.refresh' was never awaited
    db_session.refresh(other_job)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_delete_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:120: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_delete_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:129: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_delete_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:133: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestTeamIsolation::test_user_cannot_delete_other_team_job
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:134: RuntimeWarning: coroutine 'AsyncSession.refresh' was never awaited
    db_session.refresh(other_job)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestCrossTeamDataLeaks::test_search_does_not_leak_other_team_data
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:298: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestCrossTeamDataLeaks::test_search_does_not_leak_other_team_data
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:307: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_teams.py::TestCrossTeamDataLeaks::test_search_does_not_leak_other_team_data
  C:\Users\anura\ai-job-automation-saas\backend\tests\test_teams.py:313: RuntimeWarning: coroutine 'AsyncSession.commit' was never awaited
    db_session.commit()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform win32, python 3.11.9-final-0 -----------
Name                                  Stmts   Miss   Cover   Missing
--------------------------------------------------------------------
app\__init__.py                           0      0 100.00%
app\api\__init__.py                       0      0 100.00%
app\api\api.py                           15      0 100.00%
app\api\deps.py                          57     28  50.88%   33-41, 60-76, 91, 108-112, 129-133, 157, 169, 181
app\api\endpoints\__init__.py             0      0 100.00%
app\api\endpoints\ai.py                  64     32  50.00%   32-36, 43-48, 57-66, 73-77, 84-92, 99-107
app\api\endpoints\auth.py                73     39  46.58%   69-86, 113-115, 118, 145-178, 197, 222-237
app\api\endpoints\email.py               74     43  41.89%   46-95, 105-124, 131-142
app\api\endpoints\features.py            15      1  93.33%   22
app\api\endpoints\jobs.py                27      3  88.89%   36-52
app\api\endpoints\logs.py                38     18  52.63%   36-51, 66-82, 90-95
app\api\endpoints\resumes.py             72     45  37.50%   39, 62-70, 95-106, 132-138, 164-185, 208-213, 239-252
app\api\endpoints\scheduler.py           46     21  54.35%   18-37, 50-55, 75-79, 89-93, 102
app\api\endpoints\stats.py               36     23  36.11%   34, 59-113
app\api\endpoints\telegram.py            10      5  50.00%   11-16
app\api\endpoints\websockets.py          14      8  42.86%   9-18
app\automation\browser.py                29     17  41.38%   18-57, 63-68
app\automation\scrapers\base.py          13      4  69.23%   11-12, 33-34
app\automation\scrapers\linkedin.py      42     34  19.05%   12-21, 24-63
app\automation\session.py                26     17  34.62%   10, 16-21, 27-37
app\core\__init__.py                      0      0 100.00%
app\core\ai.py                           23      4  82.61%   31-34, 40
app\core\cache.py                        84     57  32.14%   23-30, 37-39, 50-52, 64-75, 94-102, 114-121, 133-144, 162-170, 190-205
app\core\csrf.py                         32     21  34.38%   18-21, 35-69, 73, 86
app\core\error_handlers.py               53      8  84.91%   45, 55, 123, 140-148
app\core\exceptions.py                   39     10  74.36%   46, 53-54, 61, 68, 75, 82-83, 90, 97
app\core\features.py                     14      6  57.14%   17-23, 31-32
app\core\logger.py                       30     30   0.00%   1-62
app\core\logging.py                      82     27  67.07%   18-45, 62, 67, 76, 119-131, 181-187, 204, 219-226
app\core\middleware.py                   23      4  82.61%   46-54
app\core\pagination.py                   34     11  67.65%   20, 25, 58-60, 92-101
app\core\rate_limit.py                   68     16  76.47%   53, 119-123, 164-177
app\core\retry.py                        96     96   0.00%   4-223
app\core\security.py                     92     62  32.61%   64-78, 94-98, 112, 126, 139, 159-182, 196-221, 234-235, 248-267, 306-326
app\db\__init__.py                        0      0 100.00%
app\db\base.py                            9      1  88.89%   12
app\db\models.py                         81      0 100.00%
app\db\session.py                         5      0 100.00%
app\email\__init__.py                     0      0 100.00%
app\email\sender.py                      63     39  38.10%   41-99, 105-110
app\main.py                              70     13  81.43%   44-46, 56-57, 86, 131, 150, 163, 171-185
app\models\job.py                        20      0 100.00%
app\notifications\__init__.py             0      0 100.00%
app\notifications\telegram.py            30     18  40.00%   19-45
app\repositories\__init__.py              2      0 100.00%
app\repositories\base.py                103     83  19.42%   54-61, 77-80, 102-118, 133-146, 161-171, 188-206, 222-238, 253-266
app\repositories\job.py                  55     39  29.09%   30, 54-66, 88-96, 111-133, 157-170, 186
app\repositories\resume.py               36     23  36.11%   29, 51-59, 81-89, 104-111
app\repositories\team.py                 35     22  37.14%   29, 44-51, 66-77, 92-103
app\repositories\user.py                 55     35  36.36%   48-51, 66-73, 85-86, 98-99, 127-135, 156-163, 175-185
app\scheduler\__init__.py                 1      0 100.00%
app\scheduler\job_wrapper.py             44     27  38.64%   38-88, 96, 101
app\scheduler\jobs.py                    77     63  18.18%   15-43, 50-102, 107-125, 131-146
app\scheduler\scheduler.py               45      6  86.67%   25-26, 29-30, 82, 94
app\schemas\__init__.py                   0      0 100.00%
app\schemas\ai.py                        25      0 100.00%
app\schemas\job.py                       32      0 100.00%
app\schemas\log.py                       15      0 100.00%
app\schemas\resume.py                    17      0 100.00%
app\schemas\team.py                      13     13   0.00%   1-17
app\schemas\token.py                     12      0 100.00%
app\schemas\user.py                      24      0 100.00%
app\services\__init__.py                  0      0 100.00%
app\services\ai_service.py               49     28  42.86%   25-27, 33-53, 56-80, 83-90, 93-104, 107-124, 127-138, 141-150, 154-155
app\services\auth_service.py             60     33  45.00%   52-64, 82, 96-97, 109-116, 128-135, 147-150, 171-173, 193-207
app\services\bot.py                      83     83   0.00%   4-220
app\services\email.py                    55     55   0.00%   4-152
app\services\job_scraper.py              41     25  39.02%   17-60
app\services\job_service.py              49     31  36.73%   30, 47-53, 74-82, 95-110, 134-143, 161-167, 188-196, 208-211, 235-241
app\services\resume.py                   41     41   0.00%   4-192
app\services\resume_service.py           59     38  35.59%   36, 53-87, 104-110, 129-136, 155-162, 179-189, 207-213, 230-236
app\services\socket_manager.py           18      9  50.00%   10-11, 14-15, 18-23
app\services\team_service.py             38     38   0.00%   8-150
--------------------------------------------------------------------
TOTAL                                  2683   1453  45.84%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml

=========================== short test summary info ===========================
FAILED tests/test_auth.py::TestUserRegistration::test_register_new_user - ass...
FAILED tests/test_auth.py::TestUserRegistration::test_register_duplicate_email
FAILED tests/test_auth.py::TestUserLogin::test_login_success - assert 401 == 200
FAILED tests/test_auth.py::TestUserLogin::test_login_wrong_password - assert ...
FAILED tests/test_auth.py::TestUserLogin::test_login_nonexistent_user - asser...
FAILED tests/test_auth.py::TestUserLogin::test_login_missing_credentials - as...
FAILED tests/test_auth.py::TestJWTTokens::test_access_protected_endpoint_with_token
FAILED tests/test_auth.py::TestJWTTokens::test_access_protected_endpoint_without_token
FAILED tests/test_auth.py::TestJWTTokens::test_access_with_invalid_token - as...
FAILED tests/test_auth.py::TestJWTTokens::test_token_expiration - assert 404 ...
FAILED tests/test_auth.py::TestRoleBasedAccess::test_member_cannot_access_admin_endpoint
FAILED tests/test_auth.py::TestRoleBasedAccess::test_viewer_has_read_only_access
FAILED tests/test_jobs.py::TestJobCreation::test_create_job_authenticated - a...
FAILED tests/test_jobs.py::TestJobCreation::test_create_job_unauthenticated
FAILED tests/test_jobs.py::TestJobCreation::test_create_job_missing_required_fields
FAILED tests/test_jobs.py::TestJobCreation::test_create_job_with_invalid_status
FAILED tests/test_jobs.py::TestJobRetrieval::test_get_all_jobs - sqlalchemy.e...
FAILED tests/test_jobs.py::TestJobRetrieval::test_get_job_by_id - sqlalchemy....
FAILED tests/test_jobs.py::TestJobRetrieval::test_filter_jobs_by_status - sql...
FAILED tests/test_jobs.py::TestJobRetrieval::test_search_jobs_by_company - sq...
FAILED tests/test_jobs.py::TestJobUpdate::test_update_job - sqlalchemy.exc.Mi...
FAILED tests/test_jobs.py::TestJobUpdate::test_update_job_status_only - sqlal...
FAILED tests/test_jobs.py::TestJobDeletion::test_delete_job - sqlalchemy.exc....
FAILED tests/test_jobs.py::TestJobDeletion::test_admin_can_delete_any_job - s...
FAILED tests/test_jobs.py::TestJobPagination::test_paginate_jobs - sqlalchemy...
FAILED tests/test_jobs.py::TestJobPagination::test_pagination_with_filters - ...
FAILED tests/test_teams.py::TestTeamIsolation::test_user_cannot_see_other_team_jobs
FAILED tests/test_teams.py::TestTeamManagement::test_create_team_on_registration
FAILED tests/test_teams.py::TestTeamManagement::test_admin_can_invite_team_members
FAILED tests/test_teams.py::TestTeamManagement::test_member_cannot_invite_team_members
FAILED tests/test_teams.py::TestTeamManagement::test_get_team_members - sqlal...
FAILED tests/test_teams.py::TestTeamManagement::test_admin_can_remove_team_member
FAILED tests/test_teams.py::TestTeamManagement::test_member_cannot_remove_team_member
FAILED tests/test_teams.py::TestCrossTeamDataLeaks::test_search_does_not_leak_other_team_data
FAILED tests/test_teams.py::TestCrossTeamDataLeaks::test_statistics_are_team_isolated
FAILED tests/smoke/test_smoke.py::TestAuthenticationFlow::test_01_health_check
FAILED tests/smoke/test_smoke.py::TestAuthenticationFlow::test_02_user_registration
FAILED tests/smoke/test_smoke.py::TestAuthenticationFlow::test_03_user_login
FAILED tests/smoke/test_smoke.py::TestAuthenticationFlow::test_04_get_current_user
FAILED tests/smoke/test_smoke.py::TestAuthenticationFlow::test_05_invalid_login
FAILED tests/smoke/test_smoke.py::TestResumeFlow::test_01_list_resumes_empty
FAILED tests/smoke/test_smoke.py::TestResumeFlow::test_02_upload_resume - Ass...
FAILED tests/smoke/test_smoke.py::TestResumeFlow::test_03_list_resumes_with_data
FAILED tests/smoke/test_smoke.py::TestResumeFlow::test_04_download_resume - A...
FAILED tests/smoke/test_smoke.py::TestResumeFlow::test_05_delete_resume - Ass...
FAILED tests/smoke/test_smoke.py::TestJobScrapingFlow::test_01_scrape_jobs - ...
FAILED tests/smoke/test_smoke.py::TestJobScrapingFlow::test_02_list_scraped_jobs
FAILED tests/smoke/test_smoke.py::TestSchedulerFlow::test_01_scheduler_status
FAILED tests/smoke/test_smoke.py::TestSchedulerFlow::test_02_list_jobs - Asse...
FAILED tests/smoke/test_smoke.py::TestStatsFlow::test_01_dashboard_stats - As...
FAILED tests/smoke/test_smoke.py::TestWebSocketFlow::test_01_websocket_endpoint_exists
====== 51 failed, 14 passed, 4 skipped, 26 warnings in 63.41s (0:01:03) =======
